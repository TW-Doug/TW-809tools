#############EXAMPLE#######################
M2M-N-TESTXXX-SRO-01#reload in 30
Reload scheduled for 20:05:11 AEST Wed Apr 22 2020 (in 30 minutes) by dougs.admin on console
Reload reason: Reload Command
Proceed with reload? [confirm]x
M2M-N-TESTXXX-SRO-01#config t
Enter configuration commands, one per line.  End with CNTL/Z.
M2M-N-TESTXXX-SRO-01(config)#int g1
M2M-N-TESTXXX-SRO-01(config-if)#shut
M2M-N-TESTXXX-SRO-01(config-if)#no shut
M2M-N-TESTXXX-SRO-01(config-if)#end
M2M-N-TESTXXX-SRO-01#
000037: Apr 22 19:35:37.330 AEST: %SYS-5-CONFIG_I: Configured from console by dougs.admin on console
000038: Apr 22 19:35:38.360 AEST: %LINK-3-UPDOWN: Interface GigabitEthernet1, changed state to down
M2M-N-TESTXXX-SRO-01#reload in 30

System configuration has been modified. Save? [yes/no]: no
Reload scheduled for 20:06:01 AEST Wed Apr 22 2020 (in 30 minutes) by dougs.admin on console
Reload reason: Reload Command
Proceed with reload? [confirm]n
M2M-N-TESTXXX-SRO-01#
#############################################################################################


no event manager applet TEST-RELOAD-IN-X
event manager applet TEST-RELOAD-IN-X

  event none
  
  action 01.5 cli command "enable"

  
  
  action 06.1 syslog msg "attempting reload in x, config change"
  action 06.2 cli command "reload in 30 reason 'reload in x with change' " pattern "\[yes/no\]"
  action 06.3 cli command "n" pattern "\[confirm\]" 
  action 06.4 cli command "y"
  action 06.5 puts "reload with change"
  
  
  action 07.1 syslog msg "attempting reload in x, no config change"
  action 07.2 cli command "reload in 30 reason 'reload in x, no config change' " pattern "\[confirm\]"
  action 07.3 cli command "y"
  action 07.5 puts "reload with no change"
  
  debug event manager action cli
  event manager run TEST-RELOAD-IN-X
  
  
  
  ########################################
  ####        example             ########
  
M2M-N-TESTXXX-SRO-01#config t
Enter configuration commands, one per line.  End with CNTL/Z.
M2M-N-TESTXXX-SRO-01(config)#hostname M2M-N-TESTXXX-SRO-02
% Hostname "M2M-N-TESTXXX-SR    " is not a legal LAT node name, Using "CISCO_4416AF"
M2M-N-TESTXXX-SRO-02(config)#end
M2M-N-TESTXXX-SRO-02#
000066: Apr 22 20:04:34.556 AEST: %SYS-5-CONFIG_I: Configured from console by dougs.admin on console
M2M-N-TESTXXX-SRO-02#  event manager run TEST-RELOAD-IN-X
reload with change

000067: Apr 22 20:04:49.018 AEST: %HA_EM-6-LOG: TEST-RELOAD-IN-X : DEBUG(cli_lib) : : CTL : cli_open called.
000068: Apr 22 20:04:49.020 AEST: %HA_EM-6-LOG: TEST-RELOAD-IN-X : DEBUG(cli_lib) : : OUT : M2M-N-TESTXXX-SRO-02>
000069: Apr 22 20:04:49.020 AEST: %HA_EM-6-LOG: TEST-RELOAD-IN-X : DEBUG(cli_lib) : : IN  : M2M-N-TESTXXX-SRO-02>enable
000070: Apr 22 20:04:49.030 AEST: %HA_EM-6-LOG: TEST-RELOAD-IN-X : DEBUG(cli_lib) : : OUT : M2M-N-TESTXXX-SRO-02#
000071: Apr 22 20:04:49.030 AEST: %HA_EM-6-LOG: TEST-RELOAD-IN-X: attempting reload in x, config change


***
*** --- SHUTDOWN in 0:30:00 ---
***

000072: Apr 22 20:04:49.032 AEST: %HA_EM-6-LOG: TEST-RELOAD-IN-X : DEBUG(cli_lib) : : IN  : M2M-N-TESTXXX-SRO-02#reload in 30 reason 'reload in x with change'
000073: Apr 22 20:04:49.142 AEST: %HA_EM-6-LOG: TEST-RELOAD-IN-X : DEBUG(cli_lib) : : OUT :
000074: Apr 22 20:04:49.142 AEST: %HA_EM-6-LOG: TEST-RELOAD-IN-X : DEBUG(cli_lib) : : OUT : System configuration has been modified. Save? [yes/no]:
000075: Apr 22 20:04:49.142 AEST: %HA_EM-6-LOG: TEST-RELOAD-IN-X : DEBUG(cli_lib) : : IN  : n
000076: Apr 22 20:04:49.168 AEST: %HA_EM-6-LOG: TEST-RELOAD-IN-X : DEBUG(cli_lib) : : OUT : Reload scheduled for 20:34:49 AEST Wed Apr 22 2020 (in 30 minutes) by  on vty0 (EEM:TEST-RELOAD-IN-X)
000077: Apr 22 20:04:49.168 AEST: %HA_EM-6-LOG: TEST-RELOAD-IN-X : DEBUG(cli_lib) : : OUT : Reload reason: 'reload in x with change'
000078: Apr 22 20:04:49.168 AEST: %HA_EM-6-LOG: TEST-RELOAD-IN-X : DEBUG(cli_lib) : : OUT : Proceed with reload? [confirm]
000079: Apr 22 20:04:49.168 AEST: %HA_EM-6-LOG: TEST-RELOAD-IN-X : DEBUG(cli_lib) : : IN  : y
000080: Apr 22 20:04:49.168 AEST: %SYS-5-SCHEDULED_RELOAD: Reload requested for 20:34:49 AEST Wed Apr 22 2020 at 20:04:49 AEST Wed Apr 22 2020 by  on vty0 (EEM:TEST-RELOAD-IN-X). Reload Reason: 'reload in x with change' .
000081: Apr 22 20:04:49.178 AEST: %HA_EM-6-LOG: TEST-RELOAD-IN-X : DEBUG(cli_lib) : : OUT : y
000082: Apr 22 20:04:49.178 AEST: %HA_EM-6-LOG: TEST-RELOAD-IN-X : DEBUG(cli_lib) : : OUT : M2M-N-TESTXXX-SRO-02#
000083: Apr 22 20:04:49.178 AEST: %HA_EM-6-LOG: TEST-RELOAD-IN-X : DEBUG(cli_lib) : : OUT : M2M-N-TESTXXX-SRO-02#
000084: Apr 22 20:04:49.180 AEST: %HA_EM-6-LOG: TEST-RELOAD-IN-X: attempting reload in x, no config change
000085: Apr 22 20:04:49.180 AEST: %HA_EM-6-LOG: TEST-RELOAD-IN-X : DEBUG(cli_lib) : : IN  : M2M-N-TESTXXX-SRO-02#reload in 30 reason 'reload in x, no config change'
M2M-N-TESTXXX-SRO-02#
000086: Apr 22 20:05:09.112 AEST: %HA_EM-6-LOG: TEST-RELOAD-IN-X : DEBUG(cli_lib) : : CTL : cli_close called.
000087: Apr 22 20:05:09.136 AEST:
000088: Apr 22 20:05:09.136 AEST: tty is now going through its death sequence

